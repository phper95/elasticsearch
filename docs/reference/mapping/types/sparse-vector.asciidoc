[[稀疏向量]][[index-multi-value-sparse-vectors]] ==== 多值稀疏向量
传入稀疏向量的值数组时，选择类似命名特征的最大值。
长文档的学习稀疏检索（https://arxiv.org/pdf/2305.18494.pdf）论文对此进行了更详细的讨论。总之，研究结果支持表示聚合通常优于分数聚合。
对于希望使用重叠功能名称的实例，应单独存储它们或使用嵌套字段。
下面是一个传入具有重叠特征名称的文档的示例。考虑到在这个示例中存在积极情绪和消极情绪两个类别。然而，为了检索的目的，我们也想要整体影响，而不是特定的情绪。在示例中，“影响”存储为多值稀疏矢量，并且只存储重叠名称的最大值。更具体地说，这里的最终“GET”查询返回约1.2的“_score”（这是“max（imp.美味[0]， imp.美味[1]）”，并且是近似值，因为我们有0.4%的相对误差，如下所述）
[源，控制台]--------------------------------放置my-index-000001{"映射"：{"属性"：{"文本"：{"类型"："文本"，"分析器"："标准"}，"影响"：{"类型"："sparse_vector"}，"正"：{"类型"："sparse_vector"}，"负"：{"类型"："sparse_vector" } } } }
POST my-index-000001/_doc{“文本”：“我吃了一些非常美味的胡萝卜。”，“影响”：[{“我”： 0.55，“有”：0.4，“一些”：0.28，“非常”：0.01，“美味”：1.2，“胡萝卜”：0.8}，{“我”：0.54，“有”：0.4，“一些”：0.28，“非常”：2.01，“美味”：0.02，“胡萝卜”：0.4}]，“积极”：{“我”：0.55，“有”：0.4，“一些”：0.28，“非常”：0.01，“美味”：1.2，“胡萝卜”：0.8}，“消极”：{“我”：0.54，“有”：0.4，“一些”：0.28，“非常”：2.01，“美味”：0.02，“胡萝卜”：0.4}}
获取my-index-000001/_search{查询：{术语：{影响：{价值：美味" } } } } --------------------------------
注意：“sparse_vector”字段不能包含在8.0到8.10之间{es}版本上*创建的索引中
注意：“sparse_vector”字段仅支持严格的正值。负值将被拒绝。
注意：“sparse_vector”字段不支持<<分析、分析器>>、查询、排序或聚合。它们只能在专门查询中使用。对这些字段使用的推荐查询是<<query-dsl-sparse-vector-query、'sparse_vector'>>查询。它们也可以在传统的<<query-dsl-text-expansion-query、'text_expansion'>>查询中使用。
注意：“sparse_vector”字段仅为精度保留9个有效位，这意味着相对误差约为0.4%。
